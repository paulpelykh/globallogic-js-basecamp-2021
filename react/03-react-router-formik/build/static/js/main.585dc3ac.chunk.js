(this["webpackJsonp03-react-router-formik"]=this["webpackJsonp03-react-router-formik"]||[]).push([[0],{10:function(e){e.exports=JSON.parse('[{"id":1,"username":"yaroslav","role":"admin","timestamp":1627934490151},{"id":2,"username":"test-user","role":"user","timestamp":1627934784096}]')},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){"use strict";r.r(t);var n,c=r(0),s=r(32),a=r.n(s),i=r(2),u=r(18),o="view",j="create",b="edit",d=r(11),l=r(16),O=r(5),f=r.n(O),x=r(13),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800;return new Promise((function(t){setTimeout(t,e)}))},p=function(){return Date.now()},m=function(e){throw new Error("Record with ID ".concat(e," does not exist"))},v=r(10),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.length;return function(){return++e}}(),k={getUsers:function(){return Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(1e3);case 2:return e.abrupt("return",v);case 3:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(x.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:if(!(r=v.find((function(t){return t.id===e})))){t.next=7;break}return t.abrupt("return",r);case 7:m(e);case 8:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(x.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return r=Object(l.a)(Object(l.a)({},e),{},{id:w(),timestamp:p()}),v.push(r),t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))()},editUser:function(e){return Object(x.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return~(r=v.findIndex((function(t){return t.id===e.id})))?v[r]=Object(l.a)(Object(l.a)({},e),{},{timestamp:p()}):m(e.id),t.abrupt("return",v[r]);case 5:case"end":return t.stop()}}),t)})))()},deleteUser:function(e){return Object(x.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:if(!~(r=v.findIndex((function(t){return t===e.id})))){t.next=7;break}return t.abrupt("return",v.splice(r,1));case 7:m(e.id);case 8:case"end":return t.stop()}}),t)})))()},getRoles:function(){return Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return e.abrupt("return",["user","super-user","admin"]);case 3:case"end":return e.stop()}}),e)})))()}},g=r(21),U="username",N="role",S=(n={},Object(g.a)(n,U,""),Object(g.a)(n,N,""),n),y=r(1);var E=function(e){var t=e.id,r=Object(i.i)().url,n=Object(i.g)(),c=function(e){return function(){n.push("".concat(r,"/user/").concat(e,"/").concat(t))}};return Object(y.jsxs)("div",{className:"Actions",children:[Object(y.jsx)("button",{onClick:c(o),children:"View"})," ",Object(y.jsx)("button",{onClick:c(b),children:"Edit"})]})};r(46);var A=function(e){var t=e.users,r=e.setUsers,n=Object(i.i)().url;return Object(c.useEffect)((function(){k.getUsers().then(r)}),[r]),Object(y.jsxs)("div",{className:"UsersTable",children:[Object(y.jsx)(d.b,{to:"".concat(n,"/user/").concat(j),children:"Create User"}),Object(y.jsxs)("table",{children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"ID"}),Object(y.jsx)("th",{children:"Username"}),Object(y.jsx)("th",{children:"Role"}),Object(y.jsx)("th",{children:"Last Updated At"}),Object(y.jsx)("th",{children:"Actions"})]})}),Object(y.jsx)("tbody",{children:t.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e.id}),Object(y.jsx)("td",{children:e.username}),Object(y.jsx)("td",{children:e.role}),Object(y.jsx)("td",{children:e.timestamp}),Object(y.jsx)("td",{children:Object(y.jsx)(E,{id:e.id})})]},e.id)}))})]})]})},I=r(35),C=r(15);r(47);var R=function(e){var t=e.name,r=e.label,n=e.validate,c=e.type,s=void 0===c?"text":c,a=e.disabled,i=void 0!==a&&a,o=Object(C.d)({name:t,validate:n}),j=Object(u.a)(o,1)[0];return Object(y.jsxs)("div",{className:"Input",children:[Object(y.jsxs)("label",{children:[Object(y.jsx)("div",{children:r}),Object(y.jsx)("input",Object(l.a)({type:s,disabled:i},j))]}),Object(y.jsx)(C.a,{name:t,className:"error",component:"div"})]})};var V=function(e){var t=e.mode,r=Object(i.g)(),n=Object(C.e)().isSubmitting;return Object(y.jsxs)("div",{children:[(t===j||t===b)&&Object(y.jsx)("button",{type:"submit",disabled:n,children:"Save"}),Object(y.jsx)("button",{type:"button",onClick:function(){return r.push("/users")},children:"Cancel"})]})};var D=function(e){var t=e.initialValues,r=e.onSubmit,n=e.mode,c=e.roles;return Object(y.jsx)(C.c,{initialValues:t,onSubmit:r,children:Object(y.jsxs)(C.b,{children:[Object(y.jsx)(R,{name:U,label:"Username",disabled:n===o}),Object(y.jsx)(R,{name:N,label:"Role",disabled:n===o,validate:function(e){if(!c.includes(e))return"Allowed roles: ".concat(c.join(", "))}}),Object(y.jsx)("br",{}),Object(y.jsx)(V,{mode:n})]})})};var J=function(e){var t=e.users,r=e.setUsers,n=Object(i.h)(),s=n.mode,a=n.id,d=Object(i.g)(),l=t.find((function(e){return e.id===Number(a)}));Object(c.useEffect)((function(){s!==o&&s!==b||l||k.getUser(Number(a)).then((function(e){return r((function(t){return[].concat(Object(I.a)(t),[e])}))})).catch((function(e){return window.alert(e.message)}))}),[a,s,l,r]);var O=Object(c.useState)([]),h=Object(u.a)(O,2),p=h[0],m=h[1];Object(c.useEffect)((function(){k.getRoles().then(m)}),[r]);var v=function(){var e=Object(x.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=t,e.t0=s,e.next=e.t0===j?5:e.t0===b?8:11;break;case 5:return e.next=7,k.createUser(r);case 7:return e.abrupt("break",12);case 8:return e.next=10,k.editUser(r);case 10:return e.abrupt("break",12);case 11:throw Error("Failed to execute this request for ".concat(s," mode"));case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),window.alert(e.t1.message);case 17:d.push("/users");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return e||S}(l);return Object(y.jsx)(D,{initialValues:w,onSubmit:v,mode:s,roles:p},"".concat(s,":").concat(w.id))};var T=function(){var e=Object(i.i)().path,t=Object(c.useState)([]),r=Object(u.a)(t,2),n=r[0],s=r[1];return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)(i.d,{children:[Object(y.jsx)(i.b,{exact:!0,path:e,children:Object(y.jsx)(A,{users:n,setUsers:s})}),Object(y.jsx)(i.b,{exact:!0,path:"".concat(e,"/user/:mode(").concat(o,"|").concat(j,"|").concat(b,")/:id?"),children:Object(y.jsx)(J,{users:n,setUsers:s})})]})})};var q=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)(i.d,{children:[Object(y.jsx)(i.a,{exact:!0,from:"/",to:"/users"}),Object(y.jsx)(i.b,{path:"/users",children:Object(y.jsx)(T,{})})]})})};var B=function(e){var t=e.children;return Object(y.jsx)(d.a,{basename:"/globallogic-js-basecamp-2021/react/03-react-router-formik/build",children:t})},F=(r(48),document.getElementById("root"));a.a.render(Object(y.jsx)(c.StrictMode,{children:Object(y.jsx)(B,{children:Object(y.jsx)(q,{})})}),F)}},[[49,1,2]]]);
//# sourceMappingURL=main.585dc3ac.chunk.js.map